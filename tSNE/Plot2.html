<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml">
<meta charset="utf-8">
<script src="http://d3js.org/d3.v3.min.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<body>

<script>

var width148  = 1100,
    height148 = 900;

var color148 = d3.scale.category20();

var force148 = d3.layout.force()
                           .charge(-120)
                           //.linkDistance(80)
                           //.linkDistance(function(d) {return 100/d.strength;})
                           .size([width148, height148])
                           .linkStrength(function(link) {return link.strength/10;});

var svg148 = d3.select("body").append("svg")
                                 .attr("width", width148)
                                 .attr("height", height148)
                                 .on("mousedown",mouseclick148);

//var arw = svg.append("marker").attr("markerWidth",6).attr("markerHeight",10).attr("refX",5).attr("refY",5).attr("orient","auto").append("path").attr("d","M 0 0 5 5 0 10 Z").style("fill","black");
var isDirected = 0;

graph148=
{
 "nodes": [
 {
 "Status": [ 0.33333 ],
"Code": [ 4 ],
"index": [ 1 ] 
},

{
 "Status": [ 0.66667 ],
"Code": [ 5 ],
"index": [ 2 ] 
},

{
 "Status": [      1 ],
"Code": [ 6 ],
"index": [ 3 ] 
} 
],
"links": [
 {
 "source": [      0 ],
"target": [      1 ],
"strength": [ 1 ] 
},

{
 "source": [      1 ],
"target": [      2 ],
"strength": [ 2 ] 
},

{
 "source": [      2 ],
"target": [      0 ],
"strength": [ 3 ] 
} 
] 
}
;

force148.nodes(graph148.nodes)
          .links(graph148.links)
          .start();

if (isDirected) {
    // build the arrow.
    svg148.append("svg:defs").selectAll("marker")
        .data(["end"])      // Different link/path types can be defined here
      .enter().append("svg:marker")    // This section adds in the arrows
        .attr("id", String)
        .attr("viewBox", "0 -5 10 10")
        .attr("refX", 10)
        .attr("refY", -1.5)
        .attr("markerWidth", 6)
        .attr("markerHeight", 6)
        .attr("orient", "auto")
      .append("svg:path")
        .attr("d", "M 0,-5 L 10,-1 0,5 3,0");
    
    // add the links and the arrows
    var link148 = svg148.append("svg:g").selectAll("path")
                              .data(graph148.links)
                              .enter().append("svg:path")
                              //    .attr("class", function(d) { return "link " + d.type; })
                              .attr("class", "link")
                              .attr("marker-end", "url(#end)")
                              .style("stroke-width", 5)
                              .style("stroke", "gray")
                              .on("mouseover",mouseover148)
                              .attr("fill","none")
                              //.on("mouseover",mouseover148);
                              ;
} else {
    var link148 = svg148.selectAll(".link")
                              .data(graph148.links)
                              .enter().append("line")
                              .attr("class", "link")
                              .style("stroke-width", 5)
                              .style("stroke", "gray")
                              .on("mouseover",mouseover148)
                              //.on("mouseover",mouseover148);
}

var node148 = svg148.selectAll(".node")
                          .data(graph148.nodes)
                          .enter().append("circle")
                          .attr("class", "node")
                          .attr("r",10)
                          .style("stroke","white")
                          .style("stroke-width",1.5)
                          .style("fill", "blue")
                          .on("mouseover",mouseover148)
                          .on("mouseout",mouseout148)
                          //.on("mouseover",mouseover148)
                          //.on("mouseout", mouseout148)
                          .call(force148.drag);

focus148  = svg148.append("g")
                        .attr("class","focus")
                        .style("display",null);

plaque148 = focus148.append("rect")
                          .attr("rx",3)
                          .attr("ry",3)
                          .attr("style","fill:lightblue;stroke:gray;stroke-width:2;fill-opacity:0.6;stroke-opacity:0.7;");

function mouseover148(d) {
    node148.transition().duration(300).style("stroke","white")
                                                  .style("stroke-width",1.5)
                                                  .style("fill","blue")
                                                  .attr("r",10);
    link148.transition().duration(300).style("stroke","gray")
                                                  .style("stroke-width",5);
    var mousecoords = d3.mouse(this);
    var obj = d3.select(this);
    focus148.selectAll("text").remove();
    if(obj.attr("class")=="link") {
    focus148.transition().duration(300)
               .attr("transform","translate(" + ((Math.round(obj.attr("x1"))+Math.round(obj.attr("x2")))/2+12) + "," + 
                                                ((Math.round(obj.attr("y1"))+Math.round(obj.attr("y2")))/2+-12) + ")");
        plaque148.transition().duration(300).attr("height",0)
                                              .attr("y",-0)
                                              .style("fill","green")
                                              .attr("width",-Inf);
        focus148.append("text").attr("opacity",0).transition().duration(300).delay(300)
                          .attr("opacity",1)
                          .attr("dx",15)
                          .attr("dy",-20*0+15)
                          .attr("stroke","black")
                          .text("NA");focus148.append("text").attr("opacity",0).transition().duration(300).delay(300)
                          .attr("opacity",1)
                          .attr("dx",-Inf)
                          .attr("dy",-20*0+15)
                          .attr("stroke","black")
                          .text(NULL);
focus148.append("text").attr("opacity",0).transition().duration(300).delay(300)
                          .attr("opacity",1)
                          .attr("dx",15)
                          .attr("dy",-20*1+15)
                          .attr("stroke","black")
                          .text("");focus148.append("text").attr("opacity",0).transition().duration(300).delay(300)
                          .attr("opacity",1)
                          .attr("dx",-Inf)
                          .attr("dy",-20*1+15)
                          .attr("stroke","black")
                          .text();
        obj.transition().duration(300).style("stroke","red")
                                                      .style("stroke-width",6);
    } else {
    focus148.transition().duration(300)
               .attr("transform","translate(" + (Math.round(obj.attr("cx"))+12) + "," + (Math.round(obj.attr("cy"))+-12) + ")");
        plaque148.transition().duration(300).attr("height",40)
                                              .attr("y",-40)
                                              .style("fill","lightblue")
                                              .attr("width",205);
        focus148.append("text").attr("opacity",0).transition().duration(300).delay(300)
                          .attr("opacity",1)
                          .attr("dx",15)
                          .attr("dy",-20*2+15)
                          .attr("stroke","black")
                          .text("Status: ");focus148.append("text").attr("opacity",0).transition().duration(300).delay(300)
                          .attr("opacity",1)
                          .attr("dx",71)
                          .attr("dy",-20*2+15)
                          .attr("stroke","black")
                          .text(d.Status);
focus148.append("text").attr("opacity",0).transition().duration(300).delay(300)
                          .attr("opacity",1)
                          .attr("dx",15)
                          .attr("dy",-20*1+15)
                          .attr("stroke","black")
                          .text("Code: ");focus148.append("text").attr("opacity",0).transition().duration(300).delay(300)
                          .attr("opacity",1)
                          .attr("dx",71)
                          .attr("dy",-20*1+15)
                          .attr("stroke","black")
                          .text(d.Code);
        obj.transition().duration(300).attr("r",20)
                                                      .style("stroke-width", 2)
                                                      .style("fill", "lightblue")
                                                      .style("stroke", "red").ease("sine");
    }
}

function mouseout148(d) {
    var obj = d3.select(this);
    obj.transition().duration(300).attr("r",10);
}

function mouseclick148() {
    node148.transition().duration(300).style("stroke","white")
                                                  .style("stroke-width",1.5)
                                                  .style("fill","blue");
    link148.transition().duration(300).style("stroke","gray")
                                                  .style("stroke-width",5);
    focus148.selectAll("text").remove();
    focus148.attr("transform","translate(" + (-width148-10) + "," + (-height148-10) + ")");
}

force148.on("tick", function() {
    
    node148.attr("cx", function(d) { return d.x; })
              .attr("cy", function(d) { return d.y; });

    if (isDirected) {
      link148.attr("d", function(d) {
          var dx = d.target.x - d.source.x,
              dy = d.target.y - d.source.y,
              dr = Math.sqrt(dx * dx + dy * dy);
          return "M" + 
              d.source.x + "," + 
              d.source.y + "A" + 
              dr + "," + dr + " 0 0,1 " + 
              d.target.x + "," + 
              d.target.y;
      });
      link148.attr("x1", function(d) { return d.source.x; })
                .attr("y1", function(d) { return d.source.y; })
                .attr("x2", function(d) { return d.target.x; })
                .attr("y2", function(d) { return d.target.y; });
    } else {
      link148.attr("x1", function(d) { return d.source.x; })
                .attr("y1", function(d) { return d.source.y; })
                .attr("x2", function(d) { return d.target.x; })
                .attr("y2", function(d) { return d.target.y; });
    }
});

</script></body></html>
